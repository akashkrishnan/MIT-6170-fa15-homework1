<!DOCTYPE html>
<html>

  <head>
    <title>6.170 Assignment 1: Prefix Match</title>
    <link rel="stylesheet" href="./index.css" type="text/css" charset="utf-8">
  </head>

  <body>

    <input id="search-term-input" type="text" placeholder="Type something...">
    <ul id="results-list"></ul>

    <script src="./words.js" charset="utf-8"></script>
    <script src="./trie.js" charset="utf-8"></script>
    <script src="./controller.js" charset="utf-8"></script>

    <script>

      document.addEventListener( 'DOMContentLoaded', function () {

        // Lazy load the data in order to not block the browser
        var trie = new Trie();
        WORDS.forEach( function ( word, i ) {
          trie.insert( WORDS[ i ].trim().toLowerCase() ); // IGNORE LEADING & TRAILING WHITESPACE AND CASE
        } );

        CONTROLLER.registerAutocompleteListener( function ( word ) {

          var NUM_WORDS_TO_SHOW = 10;

          CONTROLLER.clearSearchResults();

          var autocomplete = trie.autocomplete( word.trim().toLowerCase(), NUM_WORDS_TO_SHOW );
          for ( var i = 0, n = autocomplete.length; i < n; i++ ) {
            CONTROLLER.appendToSearchResults( autocomplete[ i ] );
          }

        } );

      } );

    </script>

  </body>

</html>
